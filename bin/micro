#!/usr/bin/env node

'use strict';

var resolve = require('path').resolve;
var colors = require('colors');
var fork = require('child_process').fork;

process.title = 'micro';

var path = process.argv[2];
var queue = process.argv[3];
var addr = process.argv[4] || '127.0.0.1';

if(!path){

  console.log(colors.red('Path is not defined'));
  process.exit();
}

if(!queue){

  console.log(colors.red('Queue is not defined.'));
  process.exit();
}


console.log(colors.green('launching '+ path +' with queue '+ queue + ' on '+ addr));
fork(__dirname+'/../build/worker.js', [resolve(path), queue, addr]);


